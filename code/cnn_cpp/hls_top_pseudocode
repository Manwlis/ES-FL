accel ( axi_m gmem_variables , axi_s inputs )
{
	local_variables
	save_variables_locally( gmem_variables )

	for batch in dataset
	{
		for example in batch
		{
			#pragma HLS DATAFLOW
			l0_forward_prop()
			l1_forward_prop()
			...
			l0_back_prop()
			l1_back_prop()
			...
			l0_gradient_calc()
			l1_gradient_calc()
			...
		}
		l0_update_variables()
		l1_update_variables()
		...
	}
	save_variables_on_gmem( local_variables )
}